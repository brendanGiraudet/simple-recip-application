@page "/ingredients"

@inherits Fluxor.Blazor.Web.Components.FluxorComponent;

@rendermode InteractiveServer
@attribute [StreamRendering]

<h3>@LabelsLocalizer["IngredientList"]</h3>

<button @onclick="OpenAddIngredientModal">@LabelsLocalizer["AddIngredient"]</button>

<p class="@GetLoadingVisibilityCssClass()">@MessagesLocalizer["LoadingInProgress"]</p>
<p class="@GetErrorVisibilityCssClass()" style="color: red;">@IngredientState.Value.ErrorMessage</p>

<div class="ingredient-grid @GetIngredientsVisibilityCssClass()">
    @foreach (var ingredient in IngredientState.Value.Ingredients)
    {
        <IngredientCard Ingredient="ingredient" OnEdit="OpenEditIngredientModal" OnDelete="DeleteIngredient" />
    }
</div>

@if (IsIngredientModalOpen)
{
    <Modal OnClose="CloseIngredientModal">
        <IngredientForm IngredientId="SelectedIngredientId" OnCancel="CloseIngredientModal" />
    </Modal>
}